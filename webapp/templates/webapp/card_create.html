<h1>Create Card</h1>
<form method="post">
  {% csrf_token %}
  <p id="output"></p>
  <label for="card_uid">Card UID:</label>
  <input type="text" name="uid" id="card_uid">

  <br>

  <label for="card_lock">Lock ID:</label>
  <input type="text" name="lock_id" id="card_lock" list="suggestions">
  <datalist id="suggestions">
    {% for lock in locks %}
    <option value="{{ lock.id }}">
    {% endfor %}
  </datalist>
  
  <button type="submit">Create</button>
</form>

<script>
  // Replace "ws://your-websocket-server.com" with the actual URL of your server
    const wsUri = "ws://172.16.22.129:8081";

    const output = document.getElementById("output"); // Assuming you have an element with id="output"

    function init() {
      const ws = new WebSocket(wsUri);

      ws.onopen = function (e) {
        output.innerHTML = "Connection established";
      };

      ws.onmessage = function (e) {
        // const data = JSON.parse(e.data);
        // Process the JSON data here
        console.log("Received data:", e.data);
        // You can further manipulate or display the data as needed
        output.innerHTML = "Received JSON: " +  e.data;// JSON.stringify(data, null, 2);
      };

      ws.onerror = function (e) {
        console.error("WebSocket Error:", e);
        output.innerHTML = "Error connecting to server";
      };

      ws.onclose = function (e) {
        console.log("WebSocket closed");
        output.innerHTML = "Connection closed";
      };
    }

    window.addEventListener("load", init);
</script>